<div style="text-align: center;">
    <h1>Cập nhật đơn hàng</h1>
</div>
<div style="margin-top: 10px; margin-bottom: 10px; width: 500px;">
    <input type="text" name="search-product" class="form-control search-input" [(ngModel)]="searchTerm"
        placeholder="Tìm kiếm sản phẩm" (input)="search()">
    <div class="search-results" *ngIf="showResults">
        <mat-table [dataSource]="searchResults" *ngIf="isProductListVisible">
            <ng-container matColumnDef="image">
                <mat-cell *matCellDef="let product">
                    <img width="60px" height="60px" src="{{ product?.productDTO?.imageURL }}" alt="Product Image">
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="name">
                <mat-cell *matCellDef="let product"> {{ product?.productDTO?.name }} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="color">
                <mat-cell *matCellDef="let product"> {{ product?.colorDTO?.name }} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="size">
                <mat-cell *matCellDef="let product"> {{ product?.sizeDTO?.sizeNumber }} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="price">
                <mat-cell *matCellDef="let product">{{product?.price | number:'1.0-0'}} đ</mat-cell>
            </ng-container>
            <mat-row *matRowDef="let row; columns: ['image','name', 'color', 'size', 'price']"
                (click)="addProductInOrder(row)"></mat-row>
        </mat-table>
    </div>
</div>
<div>
    <ag-grid-angular style="width: 100%; height: 350px" class="ag-theme-alpine" [rowData]="rowData"
        [columnDefs]="columnDefs" [headerHeight]="60" [rowHeight]="65" [suppressHorizontalScroll]="true"
        (gridReady)="onGridReady($event)">
    </ag-grid-angular>
</div>
<div style="margin-top: 10px;">
    <div class="row">
        <div class="col-4">
            <button class="btn btn-success" (click)="openVoucherSC()">Voucher</button>
            <button style="margin-left: 5px;" class="btn btn-danger" (click)="clearVoucher()">Xóa</button>
        </div>
    </div>
    <div class="row">
        <div class="col-4">
            <table class="table">
                <tbody>
                    <tr>
                        <th scope="row">Tổng giá trị sản phẩm</th>
                        <td>{{totalPrice | number:'1.0-0'}} đ</td>
                    </tr>
                    <tr>
                        <th scope="row">Tổng số lượng sản phẩm</th>
                        <td>{{totalQuantity}}</td>
                    </tr>
                    <tr *ngIf="voucherChoice.voucher">
                        <th scope="row">Voucher</th>
                        <td>
                            {{voucherChoice.voucher}}
                        </td>
                    </tr>
                    <tr *ngIf="voucherChoice.voucher">
                        <th scope="row">Voucher giảm</th>
                        <td>
                            {{priceVoucher | number:'1.0-0'}} đ
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">Tổng thanh toán</th>
                        <td>{{totalPayment | number:'1.0-0'}} đ</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div style="text-align: center;">
        <button class="btn btn-success" (click)="capNhat()">Cập nhật</button>
    </div>
</div>